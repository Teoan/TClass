(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ef99ec8"],{"001c":function(e,t,a){},"0821":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"work-div"},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"20px",height:"100%"}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"title"},[e._v(e._s(e.work.name))]),a("span",{staticClass:"homeinfo-icon"},[a("i",{staticClass:"fas fa-user"})]),e._v(" "+e._s(e.work.sname)+" "),null!==e.work.editorName?a("span",[a("span",{staticClass:"homeinfo-icon sname-margin"},[a("i",{staticClass:"fas fa-user-edit"})]),e._v(" "+e._s(e.work.editorName)+" ")]):e._e()]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"box-text"},[a("div",{staticClass:"item"},[a("i",{staticClass:"fas fa-clock"}),e._v(" 发布时间:"+e._s(e.formatDate(e.work.createTime))+" ")]),a("div",{staticClass:"item"},[a("i",{staticClass:"fas fa-italic"}),e._v(" 命名格式:"+e._s(e.fileNameFormats[e.work.fileNameFormatEnum-1])+" ")]),a("div",{staticClass:"item"},[a("i",{staticClass:"fas fa-file"}),e._v(" 文件扩展名:"+e._s(e.work.extensionName)+" ")]),a("div",{staticClass:"item"},[a("i",{staticClass:"fas fa-hourglass-half"}),e._v(" 截止时间:"+e._s(e.formatDate(e.work.lastTime))+" ")]),null!==e.work.remarks?a("div",{staticClass:"item"},[a("i",{staticClass:"fas fa-pencil-alt"}),e._v(" 备注:"+e._s(e.work.remarks)+" ")]):e._e()]),a("el-tooltip",{attrs:{disabled:e.disShowUploadTooltip,content:"超过提交时间不予许提交哦！",placement:"bottom"}},[a("div",{staticClass:"read-more-btn"},[a("el-button",{staticStyle:{width:"60%"},attrs:{size:"normal",type:"primary",round:"",disabled:e.isOutTime()&&!e.isUploaded},on:{click:function(t){e.dialogVisible=!0}}},[e._v(e._s(e.buttonText)),a("i",{staticClass:"el-icon-upload el-icon--right"})])],1)]),a("el-dialog",{attrs:{title:"上传作业",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-tooltip",{attrs:{disabled:e.isOutTime(),effect:"dark",content:"若要重新上传文件请删除旧文件",placement:"top"}},[e.isUploaded?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.fileTableLoading,expression:"fileTableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.uploadInfo}},[a("el-table-column",{attrs:{prop:"fileName",label:"文件名",width:"230"}}),a("el-table-column",{attrs:{prop:"size",formatter:e.fileSizeFormat,label:"文件大小",width:"100"}}),a("el-table-column",{attrs:{prop:"createTime",label:"上传时间",width:"180"}}),a("el-table-column",{attrs:{label:"操作","min-width":"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{disabled:!e.isOutTime(),content:"超过提交时间不予许删除文件！",placement:"top"}},[a("div",{staticClass:"cell-contain"},[a("el-button",{attrs:{size:"small",type:"danger",disabled:e.isOutTime()},on:{click:function(a){return e.deleteFile(t.row)}}},[e._v("删除")])],1)])]}}],null,!1,3747458823)})],1):e._e()],1),e.isUploaded?e._e():a("el-upload",{attrs:{drag:"",action:e.action,accept:e.work.extensionName,"show-file-list":"true","on-success":e.onSeccessUpload,"on-error":e.onErrorUpload,disabled:e.uploadDisabled,multiple:!1,data:{sId:e.currentUser.id}}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1)],1)])],1)},o=[],s=(a("a15b"),a("b680"),{props:{work:{type:Object,default:null}},data:function(){return{dialogVisible:!1,fileNameFormats:["无","学号-姓名-作业名","姓名-学号-作业名","姓名-作业名","学号-作业名"],action:"/work/"+this.$props.work.id,uploadInfo:[],isUploaded:!1,disShowUploadTooltip:!0,buttonText:"提交作业",fileTableLoading:!1}},computed:{currentUser:function(){return void 0!==this.$store.state.currentUser.role?this.$store.state.currentUser:JSON.parse(localStorage.getItem("INIT_CURRENTUSER"))}},created:function(){this.isUserUpload()},methods:{formatDate:function(e){var t=new Date(e),a=""+(t.getMonth()+1),i=""+t.getDate(),o=t.getFullYear();return a.length<2&&(a="0"+a),i.length<2&&(i="0"+i),[o,a,i].join("-")},isOutTime:function(){var e=new Date(this.work.lastTime),t=new Date;return t.getTime()>e.getTime()},onSeccessUpload:function(e,t,a){console.log(e),this.$message.success(e.msg),this.dialogVisible=!1,this.isUserUpload()},onErrorUpload:function(e,t,a){console.log(e),e=JSON.parse(e.message),this.$message.error(e.message)},deleteFile:function(e){var t=this;this.fileTableLoading=!0,this.deleteRequest("/work/deleteFile/",{wId:this.$props.work.id,sId:this.currentUser.id,fileName:e.fileName}).then((function(e){0===e.code&&!0===e.data&&(t.$message.success("删除文件成功！"),t.isUploaded=!1,t.buttonText="提交作业",t.fileTableLoading=!1,t.dialogVisible=!1)})).catch((function(e){t.fileTableLoading=!1,t.$message.error(e.msg),console.log(e)}))},isUserUpload:function(){var e=this;this.getRequest("/work/isUpload/",{wId:this.$props.work.id,sId:this.currentUser.id}).then((function(t){0===t.code&&(null!==t.data?(e.isUploaded=!0,e.buttonText="查看提交作业",e.uploadInfo[0]=t.data):e.isOutTime()&&(e.disShowUploadTooltip=!1))})).catch((function(e){console.log(e.msg)}))},fileSizeFormat:function(e,t){return(e.size/1024/1024).toFixed(2)+"MB"}}}),n=s,r=(a("b310"),a("2877")),l=Object(r["a"])(n,i,o,!1,null,"b9707bda",null);t["a"]=l.exports},1148:function(e,t,a){"use strict";var i=a("a691"),o=a("1d80");e.exports="".repeat||function(e){var t=String(o(this)),a="",s=i(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(a+=t);return a}},"408a":function(e,t,a){var i=a("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},4183:function(e,t,a){"use strict";var i=a("6b7f"),o=a.n(i);o.a},"6b7f":function(e,t,a){},"77ba":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"div-card"},[a("div",{staticClass:"select-div"},[a("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"请输入作业名称搜索"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.selectWorkByName(t)}},model:{value:e.selectWorkName,callback:function(t){e.selectWorkName=t},expression:"selectWorkName"}}),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{align:"right",type:"date","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.selectCreateTime,callback:function(t){e.selectCreateTime=t},expression:"selectCreateTime"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.selectWorkByName}},[e._v("搜索")])],1),a("el-row",{staticClass:"el-row-div"},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.workDataLoading,expression:"workDataLoading"}],attrs:{span:24}},[a("div",{staticClass:"work-list-div"},e._l(e.workList,(function(e){return a("workInfo",{key:e.id,attrs:{work:e}})})),1)])],1),a("el-pagination",{attrs:{background:"","page-count":e.pageInfo.pages,"current-page":e.pageInfo.current,"hide-on-single-page":""},on:{"current-change":e.currentChange}})],1)},o=[],s=a("0821"),n={components:{workInfo:s["a"]},data:function(){return{workList:[],pageInfo:"",selectWorkName:null,selectCreateTime:null,workDataLoading:!1,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}}]}}},created:function(){this.getWorksData(1,6)},mounted:function(){},methods:{currentChange:function(e){this.getWorksData(e,6)},getWorksData:function(e,t){var a=this;this.workDataLoading=!0,this.getRequest("/work/",{current:e,size:t,name:this.selectWorkName,createTime:this.selectCreateTime}).then((function(e){0===e.code&&(a.pageInfo=e.data,a.workList=a.pageInfo.records,a.workDataLoading=!1)})).catch((function(e){console.log(e),a.workDataLoading=!1}))},selectWorkByName:function(){this.getWorksData(1,6)}}},r=n,l=(a("4183"),a("2877")),c=Object(l["a"])(r,i,o,!1,null,"0eb0754c",null);t["default"]=c.exports},a15b:function(e,t,a){"use strict";var i=a("23e7"),o=a("44ad"),s=a("fc6a"),n=a("a640"),r=[].join,l=o!=Object,c=n("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(e){return r.call(s(this),void 0===e?",":e)}})},b310:function(e,t,a){"use strict";var i=a("001c"),o=a.n(i);o.a},b680:function(e,t,a){"use strict";var i=a("23e7"),o=a("a691"),s=a("408a"),n=a("1148"),r=a("d039"),l=1..toFixed,c=Math.floor,d=function(e,t,a){return 0===t?a:t%2===1?d(e,t-1,a*e):d(e*e,t/2,a)},u=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){l.call({})}));i({target:"Number",proto:!0,forced:f},{toFixed:function(e){var t,a,i,r,l=s(this),f=o(e),p=[0,0,0,0,0,0],m="",g="0",h=function(e,t){var a=-1,i=t;while(++a<6)i+=e*p[a],p[a]=i%1e7,i=c(i/1e7)},w=function(e){var t=6,a=0;while(--t>=0)a+=p[t],p[t]=c(a/e),a=a%e*1e7},k=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==p[e]){var a=String(p[e]);t=""===t?a:t+n.call("0",7-a.length)+a}return t};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(t=u(l*d(2,69,1))-69,a=t<0?l*d(2,-t,1):l/d(2,t,1),a*=4503599627370496,t=52-t,t>0){h(0,a),i=f;while(i>=7)h(1e7,0),i-=7;h(d(10,i,1),0),i=t-1;while(i>=23)w(1<<23),i-=23;w(1<<i),h(1,1),w(2),g=k()}else h(0,a),h(1<<-t,0),g=k()+n.call("0",f);return f>0?(r=g.length,g=m+(r<=f?"0."+n.call("0",f-r)+g:g.slice(0,r-f)+"."+g.slice(r-f))):g=m+g,g}})}}]);
//# sourceMappingURL=chunk-9ef99ec8.5c8eca07.js.map