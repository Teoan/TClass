(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46f348de"],{6392:function(t,e,s){},cd4d:function(t,e,s){"use strict";var a=s("6392"),r=s.n(a);r.a},f10b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"userinfo-div"},[s("el-card",{staticClass:"box-card-info",attrs:{shadow:"hover"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("关于我")])]),s("div",[s("el-avatar",{attrs:{src:t.currentUser.avatarUrl,size:150}})],1),s("div",{staticClass:"user-name"},[t._v(" "+t._s(t.currentUser.name)+" ")]),s("div",{staticClass:"user-role-name border-bottom"},[t._v(" "+t._s(t.currentUser.role.zhName)+" ")]),s("div",{staticClass:"user-orther-info"},[s("div",{staticClass:"item border-bottom"},[s("span",[s("i",{staticClass:"fas fa-map-marker-alt"})]),t._v(" "+t._s(t.currentUser.nativePlace)+" ")]),s("div",{staticClass:"item border-bottom"},[s("span",[s("i",{staticClass:"fas fa-envelope"})]),t._v(" "+t._s(t.currentUser.email)+" ")]),s("div",{staticClass:"item border-bottom"},[s("span",[s("i",{staticClass:"fas fa-phone"})]),t._v(" "+t._s(t.currentUser.phone)+" ")]),s("div",{staticClass:"login-time"},[s("div",[t._v("最近登录时间")]),s("div",[t._v(t._s(t.currentUser.loginTime))])])])]),s("el-card",{staticClass:"box-card-data",attrs:{shadow:"hover"}},[s("div",[s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.userDataLoading,expression:"userDataLoading"}],ref:"userData",attrs:{model:t.userData,"label-width":"auto",rules:t.rules,inline:!0,"status-icon":!0}},[s("el-form-item",{attrs:{label:"电话",prop:"phone"}},[s("el-input",{staticClass:"input-width",model:{value:t.userData.phone,callback:function(e){t.$set(t.userData,"phone",e)},expression:"userData.phone"}})],1),s("el-form-item",{attrs:{label:"邮箱地址",prop:"email"}},[s("el-input",{staticClass:"input-width",model:{value:t.userData.email,callback:function(e){t.$set(t.userData,"email",e)},expression:"userData.email"}})],1),s("el-form-item",{attrs:{label:"性别"}},[s("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.userData.gender,callback:function(e){t.$set(t.userData,"gender",e)},expression:"userData.gender"}},[s("el-option",{attrs:{label:"男",value:"男"}}),s("el-option",{attrs:{label:"女",value:"女"}})],1)],1),s("el-form-item",{attrs:{label:"民族"}},[s("el-select",{attrs:{placeholder:"请选择您的民族",filterable:""},model:{value:t.userData.nationId,callback:function(e){t.$set(t.userData,"nationId",e)},expression:"userData.nationId"}},t._l(t.nations,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),s("el-form-item",{attrs:{label:"政治面貌"}},[s("el-select",{attrs:{placeholder:"请选择您的政治面貌",filterable:""},model:{value:t.userData.politicId,callback:function(e){t.$set(t.userData,"politicId",e)},expression:"userData.politicId"}},t._l(t.politicsstatuses,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),s("el-form-item",{attrs:{label:"校内部门"}},[s("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.userData.departmentIdList,callback:function(e){t.$set(t.userData,"departmentIdList",e)},expression:"userData.departmentIdList"}},t._l(t.departments,(function(t){return s("el-option",{key:t.value,attrs:{label:t.name,value:t.id}})})),1)],1),s("el-form-item",{attrs:{label:"家庭住址"}},[s("el-input",{staticClass:"address-textarea",attrs:{type:"textarea"},model:{value:t.userData.address,callback:function(e){t.$set(t.userData,"address",e)},expression:"userData.address"}})],1),s("div",{staticClass:"submit-btn"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("userData")}}},[t._v("修改资料")])],1)],1),s("el-divider"),s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.passDataLoading,expression:"passDataLoading"}],ref:"passData",attrs:{"label-width":"auto",model:t.pass,rules:t.rules}},[s("el-form-item",{attrs:{label:"新密码",prop:"password"}},[s("el-input",{staticClass:"input-width",attrs:{type:"password",autocomplete:"off"},model:{value:t.pass.password,callback:function(e){t.$set(t.pass,"password",e)},expression:"pass.password"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[s("el-input",{staticClass:"input-width",attrs:{type:"password",autocomplete:"off"},model:{value:t.pass.checkPassword,callback:function(e){t.$set(t.pass,"checkPassword",e)},expression:"pass.checkPassword"}})],1),s("el-form-item",{staticClass:"submit-btn"},[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("passData")}}},[t._v("修改密码")])],1)],1)],1)])],1)},r=[],i={data:function(){var t=this,e=function(e,s,a){""===s?a(new Error("请输入密码")):(""!==t.pass.checkPassword&&t.$refs.passData.validateField("checkPass"),a())},s=function(e,s,a){""===s?a(new Error("请再次输入密码")):s!==t.pass.password?a(new Error("两次输入密码不一致!")):a()};return{userData:{id:"",gender:"",nationId:"",politicId:"",email:"",phone:"",address:"",departmentIdList:[]},rules:{email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phone:[{pattern:/^1[3|4|5|7|8][0-9]\d{8}$/,message:"请输入正确的电话号码",trigger:["blur","change"]}],password:[{validator:e,trigger:"blur"},{min:6,message:"密码最少为6位",trigger:"blur"}],checkPassword:[{validator:s,trigger:"blur"}]},userDataLoading:!1,passDataLoading:!1,userDepartmentList:[],nations:[],departments:[],politicsstatuses:[],pass:{password:"",checkPassword:""}}},computed:{currentUser:function(){return this.$store.state.currentUser}},created:function(){this.userData.id=this.currentUser.id,this.userData.gender=this.currentUser.gender,this.userData.nationId=this.currentUser.nationId,this.userData.politicId=this.currentUser.politicId,this.userData.email=this.currentUser.email,this.userData.phone=this.currentUser.phone,this.userData.address=this.currentUser.address,this.userData.departmentIdList=this.currentUser.departmentIdList,this.getNations(),this.getDepartments(),this.getPoliticsstatuses()},methods:{getNations:function(){var t=this;this.getRequest("/student/nations").then((function(e){0===e.code&&(t.nations=e.data)}))},getDepartments:function(){var t=this;this.getRequest("/student/departments").then((function(e){0===e.code&&(t.departments=e.data)}))},getPoliticsstatuses:function(){var t=this;this.getRequest("/student/politicsstatuses").then((function(e){0===e.code&&(t.politicsstatuses=e.data)}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(s){if(!s)return console.log("error submit!!"),!1;"userData"===t?(e.userDataLoading=!0,e.putRequest("/student/",e.userData).then((function(t){0===t.code&&(e.$message.success("资料修改成功！"),e.userDataLoading=!1)})).catch((function(t){e.userDataLoading=!1,console.log(t)}))):"passData"===t&&(e.passDataLoading=!0,e.putRequest("/student/",{id:e.userData.id,password:e.pass.password}).then((function(t){0===t.code&&(e.$message.success("密码修改成功！"),e.passDataLoading=!1,e.pass.password="",e.pass.checkPassword="")})).catch((function(t){e.passDataLoading=!1,console.log(t)})))}))}}},n=i,o=(s("cd4d"),s("2877")),l=Object(o["a"])(n,a,r,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-46f348de.bff1409f.js.map