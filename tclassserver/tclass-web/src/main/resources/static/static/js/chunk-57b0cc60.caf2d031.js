(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57b0cc60"],{"001c":function(t,e,i){},"0821":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"work-div"},[i("el-card",{attrs:{shadow:"hover","body-style":{padding:"20px",height:"100%"}}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"title"},[t._v(t._s(t.work.name))]),i("span",{staticClass:"homeinfo-icon"},[i("i",{staticClass:"fas fa-user"})]),t._v(" "+t._s(t.work.sname)+" "),null!==t.work.editorName?i("span",[i("span",{staticClass:"homeinfo-icon sname-margin"},[i("i",{staticClass:"fas fa-user-edit"})]),t._v(" "+t._s(t.work.editorName)+" ")]):t._e()]),i("div",{staticClass:"card-body"},[i("div",{staticClass:"box-text"},[i("div",{staticClass:"item"},[i("i",{staticClass:"fas fa-clock"}),t._v(" 发布时间:"+t._s(t.formatDate(t.work.createTime))+" ")]),i("div",{staticClass:"item"},[i("i",{staticClass:"fas fa-italic"}),t._v(" 命名格式:"+t._s(t.fileNameFormats[t.work.fileNameFormatEnum-1])+" ")]),i("div",{staticClass:"item"},[i("i",{staticClass:"fas fa-file"}),t._v(" 文件扩展名:"+t._s(t.work.extensionName)+" ")]),i("div",{staticClass:"item"},[i("i",{staticClass:"fas fa-hourglass-half"}),t._v(" 截止时间:"+t._s(t.formatDate(t.work.lastTime))+" ")]),null!==t.work.remarks?i("div",{staticClass:"item"},[i("i",{staticClass:"fas fa-pencil-alt"}),t._v(" 备注:"+t._s(t.work.remarks)+" ")]):t._e()]),i("el-tooltip",{attrs:{disabled:t.disShowUploadTooltip,content:"超过提交时间不予许提交哦！",placement:"bottom"}},[i("div",{staticClass:"read-more-btn"},[i("el-button",{staticStyle:{width:"60%"},attrs:{size:"normal",type:"primary",round:"",disabled:t.isOutTime()&&!t.isUploaded},on:{click:function(e){t.dialogVisible=!0}}},[t._v(t._s(t.buttonText)),i("i",{staticClass:"el-icon-upload el-icon--right"})])],1)]),i("el-dialog",{attrs:{title:"上传作业",visible:t.dialogVisible,width:"35%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-tooltip",{attrs:{disabled:t.isOutTime(),effect:"dark",content:"若要重新上传文件请删除旧文件",placement:"top"}},[t.isUploaded?i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.fileTableLoading,expression:"fileTableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.uploadInfo}},[i("el-table-column",{attrs:{prop:"fileName",label:"文件名",width:"230"}}),i("el-table-column",{attrs:{prop:"size",formatter:t.fileSizeFormat,label:"文件大小",width:"100"}}),i("el-table-column",{attrs:{prop:"createTime",label:"上传时间",width:"180"}}),i("el-table-column",{attrs:{label:"操作","min-width":"80",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{attrs:{disabled:!t.isOutTime(),content:"超过提交时间不予许删除文件！",placement:"top"}},[i("div",{staticClass:"cell-contain"},[i("el-button",{attrs:{size:"small",type:"danger",disabled:t.isOutTime()},on:{click:function(i){return t.deleteFile(e.row)}}},[t._v("删除")])],1)])]}}],null,!1,3747458823)})],1):t._e()],1),t.isUploaded?t._e():i("el-upload",{attrs:{drag:"",action:t.action,accept:t.work.extensionName,"show-file-list":"true","on-success":t.onSeccessUpload,"on-error":t.onErrorUpload,disabled:t.uploadDisabled,multiple:!1,data:{sId:t.currentUser.id}}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),i("em",[t._v("点击上传")])])])],1)],1)])],1)},s=[],o=(i("a15b"),i("b680"),{props:{work:{type:Object,default:null}},data:function(){return{dialogVisible:!1,fileNameFormats:["无","学号-姓名-作业名","姓名-学号-作业名","姓名-作业名","学号-作业名"],action:"/work/"+this.$props.work.id,uploadInfo:[],isUploaded:!1,disShowUploadTooltip:!0,buttonText:"提交作业",fileTableLoading:!1}},computed:{currentUser:function(){return void 0!==this.$store.state.currentUser.role?this.$store.state.currentUser:JSON.parse(localStorage.getItem("INIT_CURRENTUSER"))}},created:function(){this.isUserUpload()},methods:{formatDate:function(t){var e=new Date(t),i=""+(e.getMonth()+1),a=""+e.getDate(),s=e.getFullYear();return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),[s,i,a].join("-")},isOutTime:function(){var t=new Date(this.work.lastTime),e=new Date;return e.getTime()>t.getTime()},onSeccessUpload:function(t,e,i){console.log(t),this.$message.success(t.msg),this.dialogVisible=!1,this.isUserUpload()},onErrorUpload:function(t,e,i){console.log(t),t=JSON.parse(t.message),this.$message.error(t.message)},deleteFile:function(t){var e=this;this.fileTableLoading=!0,this.deleteRequest("/work/deleteFile/",{wId:this.$props.work.id,sId:this.currentUser.id,fileName:t.fileName}).then((function(t){0===t.code&&!0===t.data&&(e.$message.success("删除文件成功！"),e.isUploaded=!1,e.buttonText="提交作业",e.fileTableLoading=!1,e.dialogVisible=!1)})).catch((function(t){e.fileTableLoading=!1,e.$message.error(t.msg),console.log(t)}))},isUserUpload:function(){var t=this;this.getRequest("/work/isUpload/",{wId:this.$props.work.id,sId:this.currentUser.id}).then((function(e){0===e.code&&(null!==e.data?(t.isUploaded=!0,t.buttonText="查看提交作业",t.uploadInfo[0]=e.data):t.isOutTime()&&(t.disShowUploadTooltip=!1))})).catch((function(t){console.log(t.msg)}))},fileSizeFormat:function(t,e){return(t.size/1024/1024).toFixed(2)+"MB"}}}),n=o,r=(i("b310"),i("2877")),l=Object(r["a"])(n,a,s,!1,null,"b9707bda",null);e["a"]=l.exports},1148:function(t,e,i){"use strict";var a=i("a691"),s=i("1d80");t.exports="".repeat||function(t){var e=String(s(this)),i="",o=a(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(i+=e);return i}},"202a9":function(t,e,i){},"3d2c":function(t,e,i){"use strict";var a=i("202a9"),s=i.n(a);s.a},"408a":function(t,e,i){var a=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"736c":function(t,e,i){},a15b:function(t,e,i){"use strict";var a=i("23e7"),s=i("44ad"),o=i("fc6a"),n=i("a640"),r=[].join,l=s!=Object,c=n("join",",");a({target:"Array",proto:!0,forced:l||!c},{join:function(t){return r.call(o(this),void 0===t?",":t)}})},b310:function(t,e,i){"use strict";var a=i("001c"),s=i.n(a);s.a},b680:function(t,e,i){"use strict";var a=i("23e7"),s=i("a691"),o=i("408a"),n=i("1148"),r=i("d039"),l=1..toFixed,c=Math.floor,d=function(t,e,i){return 0===e?i:e%2===1?d(t,e-1,i*t):d(t*t,e/2,i)},u=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){l.call({})}));a({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,i,a,r,l=o(this),f=s(t),m=[0,0,0,0,0,0],p="",h="0",v=function(t,e){var i=-1,a=e;while(++i<6)a+=t*m[i],m[i]=a%1e7,a=c(a/1e7)},g=function(t){var e=6,i=0;while(--e>=0)i+=m[e],m[e]=c(i/t),i=i%t*1e7},b=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==m[t]){var i=String(m[t]);e=""===e?i:e+n.call("0",7-i.length)+i}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(p="-",l=-l),l>1e-21)if(e=u(l*d(2,69,1))-69,i=e<0?l*d(2,-e,1):l/d(2,e,1),i*=4503599627370496,e=52-e,e>0){v(0,i),a=f;while(a>=7)v(1e7,0),a-=7;v(d(10,a,1),0),a=e-1;while(a>=23)g(1<<23),a-=23;g(1<<a),v(1,1),g(2),h=b()}else v(0,i),v(1<<-e,0),h=b()+n.call("0",f);return f>0?(r=h.length,h=p+(r<=f?"0."+n.call("0",f-r)+h:h.slice(0,r-f)+"."+h.slice(r-f))):h=p+h,h}})},e70f:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"homeinfo-div"},[i("el-row",{staticClass:"el-row-div"},[i("el-col",{staticStyle:{"margin-bottom":"8%"},attrs:{span:24}},[i("noticeInfo",{attrs:{notice:t.notice}})],1),i("el-col",{staticStyle:{"margin-bottom":"8%"},attrs:{span:24}},[i("div",{staticClass:"work-list-div"},t._l(t.workList,(function(t){return i("workInfo",{key:t.id,attrs:{work:t}})})),1)])],1)],1)},s=[],o=i("f01e"),n=i("0821"),r={components:{noticeInfo:o["a"],workInfo:n["a"]},data:function(){return{workList:"",notice:""}},created:function(){this.getCurrentNoticeData(),this.getWorkPageData(1,3)},methods:{getCurrentNoticeData:function(){var t=this;this.getRequest("/notice/current").then((function(e){0===e.code&&(t.notice=e.data)}))},getWorkPageData:function(t,e){var i=this;this.getRequest("/work/",{current:t,size:e}).then((function(t){0===t.code&&(i.workList=t.data.records)}))},readMoreNotice:function(){this.$router.push({path:"/noticeinfo",query:{id:this.notice.id}})}}},l=r,c=(i("3d2c"),i("2877")),d=Object(c["a"])(l,a,s,!1,null,"0b7a9a28",null);e["default"]=d.exports},f01e:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{attrs:{shadow:"hover","body-style":{padding:"20px",height:"100%"}}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"title"},[t._v(t._s(t.notice.title))]),i("span",{staticClass:"homeinfo-icon"},[i("i",{staticClass:"fas fa-clock"})]),t._v(" "+t._s(t.formatDate(t.notice.createTime))+" "),i("span",{staticClass:"homeinfo-icon sname-margin"},[i("i",{staticClass:"fas fa-user"})]),t._v(" "+t._s(t.notice.sname)+" "),null!==t.notice.editSName?i("span",[i("span",{staticClass:"homeinfo-icon sname-margin"},[i("i",{staticClass:"fas fa-user-edit"})]),t._v(" "+t._s(t.notice.editSName)+" ")]):t._e()]),i("div",{staticClass:"card-body"},[i("viewer",{staticClass:"viewer",attrs:{"initial-value":t.getSubstr(t.notice.content,0,120)+"..."}}),i("div",{staticClass:"read-more-btn"},[i("el-button",{attrs:{size:"normal",type:"primary",round:""},on:{click:t.readMoreNotice}},[t._v("阅读更多...")])],1)],1)])},s=[],o=(i("a15b"),i("fe5f"),i("4ede")),n={components:{viewer:o["Viewer"]},props:{notice:{type:Object,default:null}},data:function(){return{}},methods:{readMoreNotice:function(){this.$router.push({path:"/noticeinfo",query:{id:this.$props.notice.id}})},getSubstr:function(t,e,i){return t.substring(e,i)},formatDate:function(t){var e=new Date(t),i=""+(e.getMonth()+1),a=""+e.getDate(),s=e.getFullYear();return i.length<2&&(i="0"+i),a.length<2&&(a="0"+a),[s,i,a].join("-")}}},r=n,l=(i("f5d4"),i("2877")),c=Object(l["a"])(r,a,s,!1,null,"0ba1ac0d",null);e["a"]=c.exports},f5d4:function(t,e,i){"use strict";var a=i("736c"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-57b0cc60.caf2d031.js.map