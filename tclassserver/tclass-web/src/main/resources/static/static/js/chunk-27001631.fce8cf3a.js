(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27001631"],{"1aff":function(t,e,a){},9515:function(t,e,a){"use strict";var i=a("1aff"),l=a.n(i);l.a},e382:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"userMana-div"},[a("el-card",{staticClass:"box-card-userdata",attrs:{shadow:"hover","body-style":{height:"100%"}}},[a("div",{staticClass:"select-div"},[a("el-input",{staticStyle:{"min-width":"200px",width:"20%","margin-right":"20px"},attrs:{"prefix-icon":"el-icon-search",placeholder:"根据学生姓名搜索"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.selectStudent(e)}},model:{value:t.selectUserData.name,callback:function(e){t.$set(t.selectUserData,"name",e)},expression:"selectUserData.name"}}),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.selectStudent}},[t._v("搜索")]),a("el-dialog",{attrs:{title:"数据管理",visible:t.dialogDataVisible},on:{"update:visible":function(e){t.dialogDataVisible=e}}},[a("div",{staticClass:"student-date-but-div"},[a("div",[a("el-upload",{staticClass:"upload",attrs:{action:"/admin/student/import","on-success":t.onSeccessUpload,"on-error":t.onErrorUpload,"before-upload":t.beforeUpload,disabled:t.uploadDisabled,multiple:!1,accept:".xlsx","show-file-list":!1}},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.uploadLoading,expression:"uploadLoading"}],attrs:{type:"primary",icon:"el-icon-upload2",disabled:t.uploadDisabled}},[t._v("导入学生数据")])],1),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:t.exportAllStudentData}},[t._v("导出学生数据")]),a("el-tooltip",{attrs:{effect:"dark",content:"模板内容请参考导出的学生数据！",placement:"top"}},[a("el-link",{staticStyle:{"margin-left":"20px"},attrs:{underline:!1,icon:"el-icon-download",type:"success"},on:{click:t.getTemplate}},[t._v("下载导入模板")])],1)],1)])]),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-s-grid"},on:{click:function(e){t.dialogDataVisible=!0}}},[t._v("学生数据管理")]),a("el-dialog",{attrs:{title:"高级搜索",visible:t.dialogSelectVisible},on:{"update:visible":function(e){t.dialogSelectVisible=e}}},[a("el-form",{ref:"selectUserData",attrs:{model:t.selectUserData,"label-width":"auto",inline:!0,"status-icon":!0}},[a("el-form-item",{attrs:{label:"籍贯"}},[a("el-cascader",{attrs:{options:t.regionData},model:{value:t.selectedNativePlaceOptions,callback:function(e){t.selectedNativePlaceOptions=e},expression:"selectedNativePlaceOptions"}})],1),a("el-form-item",{attrs:{label:"民族"}},[a("el-select",{attrs:{placeholder:"请选择民族",filterable:""},model:{value:t.selectUserData.nationId,callback:function(e){t.$set(t.selectUserData,"nationId",e)},expression:"selectUserData.nationId"}},t._l(t.nations,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"政治面貌"}},[a("el-select",{attrs:{placeholder:"请选择政治面貌",filterable:""},model:{value:t.selectUserData.politicId,callback:function(e){t.$set(t.selectUserData,"politicId",e)},expression:"selectUserData.politicId"}},t._l(t.politicsstatuses,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"班级职务"}},[a("el-select",{attrs:{placeholder:"请选择班级职务",filterable:""},model:{value:t.selectUserData.posId,callback:function(e){t.$set(t.selectUserData,"posId",e)},expression:"selectUserData.posId"}},t._l(t.positions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:t.selectUserData.gender,callback:function(e){t.$set(t.selectUserData,"gender",e)},expression:"selectUserData.gender"}},[a("el-option",{attrs:{label:"男",value:"男"}}),a("el-option",{attrs:{label:"女",value:"女"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.selectStudent}},[t._v("查询")])],1)],1),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-info"},on:{click:function(e){t.dialogSelectVisible=!0}}},[t._v("高级搜索")]),a("el-dialog",{attrs:{title:"批量管理",visible:t.dialogBatchVisible},on:{"update:visible":function(e){t.dialogBatchVisible=e}}},[a("div",{staticClass:"student-date-but-div"},[[a("el-popconfirm",{attrs:{title:"确定批量删除所选学生吗？"},on:{onConfirm:t.deleteStudents}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("批量删除")])],1)],a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.exportStudentData}},[t._v("批量导出")])],2)]),t.multipleSelection.length>0?a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-s-data"},on:{click:function(e){t.dialogBatchVisible=!0}}},[t._v("批量管理")]):t._e()],1),a("div",{staticClass:"table-div"},[a("el-tooltip",{attrs:{content:"选中可进行批量删除",placement:"top-start"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.userDataList,height:"100%",border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"name",label:"学生姓名","min-width":"100"}}),a("el-table-column",{attrs:{prop:"id",label:"学号","min-width":"110"}}),a("el-table-column",{attrs:{prop:"gender",label:"性别","min-width":"50"}}),a("el-table-column",{attrs:{prop:"nation.name",label:"民族","min-width":"80"}}),a("el-table-column",{attrs:{prop:"nativePlace",label:"籍贯",formatter:t.formatNativePlace,"min-width":"100"}}),a("el-table-column",{attrs:{prop:"position.name",label:"班级职务","min-width":"80"}}),a("el-table-column",{attrs:{prop:"politicsstatus.name",label:"政治面貌","min-width":"100"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"100"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号码","min-width":"100"}}),a("el-table-column",{attrs:{prop:"address",label:"住址","min-width":"100"}}),a("el-table-column",{attrs:{prop:"loginTime",label:"最近登录时间","min-width":"120"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"cell-contain"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){return t.handleResetPass(e.row)}}},[t._v("重置密码")])],1)]}}])})],1)],1)],1),a("div",{staticClass:"page-div"},[a("el-pagination",{attrs:{background:"",total:t.pageInfo.total,"page-count":t.pageInfo.pages,"current-page":t.pageInfo.current,"hide-on-single-page":""},on:{"current-change":t.currentChange}})],1)])],1)},l=[],n=(a("baa5"),a("ac1f"),a("5319"),a("ef6c")),s={data:function(){return{userDataList:[],pageInfo:"",selectInput:"",selectUserData:{id:null,name:null,gender:null,posId:null,nationId:null,politicId:null,nativePlace:null},tableLoading:!1,multipleSelection:[],dialogDataVisible:!1,dialogBatchVisible:!1,dialogSelectVisible:!1,regionData:n["regionData"],selectedNativePlaceOptions:[],nations:[],departments:[],politicsstatuses:[],positions:[],uploadDisabled:!1,uploadLoading:!1}},created:function(){this.getData(1,10),this.getNations(),this.getDepartments(),this.getPoliticsstatuses(),this.getPositions()},methods:{getData:function(t,e){var a=this;this.tableLoading=!0,this.getRequest("/admin/student/",{current:t,size:e}).then((function(t){0===t.code&&(a.pageInfo=t.data,a.userDataList=a.pageInfo.records,a.tableLoading=!1)})).catch((function(t){a.tableLoading=!1,console.log(t)}))},handleDelete:function(t){this.deleteStudentByidList([t.id])},handleEdit:function(t){this.$router.push({path:"/useredit",query:{id:t.id}})},handleResetPass:function(t){var e=this;this.tableLoading=!0,this.putRequest("/admin/student/",{id:t.id,password:"123456"}).then((function(t){0===t.code&&t.data&&(e.$message.success("密码重置成功！"),e.tableLoading=!1)})).catch((function(t){e.tableLoading=!1,console.log(t)}))},handleSelectionChange:function(t){this.multipleSelection=t},formatNativePlace:function(t,e){return t.nativePlace.replace(/[,]/g,"")},currentChange:function(t){this.getData(t,10)},selectStudent:function(){var t=this;this.tableLoading=!0,this.dialogSelectVisible=!1,this.nativePlaceCodeToText(),this.getRequest("/admin/student/",this.selectUserData).then((function(e){0===e.code&&(t.pageInfo=e.data,t.userDataList=t.pageInfo.records,t.tableLoading=!1,t.initSelectUserData())})).catch((function(e){t.tableLoading=!1,console.log(e)}))},initSelectUserData:function(){this.selectUserData={id:null,name:null,gender:null,posId:null,nationId:null,politicId:null,nativePlace:null},this.selectedNativePlaceOptions=[]},deleteStudentByidList:function(t){var e=this;this.tableLoading=!0,this.deleteRequest("/admin/student/",t).then((function(t){0===t.code&&t.data&&(e.$message.success("删除成功"),e.getData(e.pageInfo.current,10),e.tableLoading=!1,e.dialogBatchVisible=!1)})).catch((function(t){e.tableLoading=!1,console.log(t)}))},deleteStudents:function(){var t=[];if(this.multipleSelection.length>0){for(var e=0;e<this.multipleSelection.length;e++)t[e]=this.multipleSelection[e].id;this.deleteStudentByidList(t)}},exportStudentData:function(){for(var t=[],e=0;e<this.multipleSelection.length;e++)t[e]=this.multipleSelection[e].id;window.open("/admin/student/export?idList="+t,"_parent")},exportAllStudentData:function(){window.open("/admin/student/export?idList=","_parent")},getNations:function(){var t=this;this.getRequest("/student/nations").then((function(e){0===e.code&&(t.nations=e.data)}))},getDepartments:function(){var t=this;this.getRequest("/student/departments").then((function(e){0===e.code&&(t.departments=e.data)}))},getPoliticsstatuses:function(){var t=this;this.getRequest("/student/political").then((function(e){0===e.code&&(t.politicsstatuses=e.data)}))},getPositions:function(){var t=this;this.getRequest("/student/positions").then((function(e){0===e.code&&(t.positions=e.data)}))},nativePlaceCodeToText:function(){if(this.selectedNativePlaceOptions.length>0){var t="";for(var e in this.selectedNativePlaceOptions)t=t+n["CodeToText"][this.selectedNativePlaceOptions[e]]+",";this.selectUserData.nativePlace=t.substring(0,t.lastIndexOf(","))}},onSeccessUpload:function(t,e,a){-1===t.code?this.$message.error(t.msg):this.$message.success(t.msg),this.uploadDisabled=!1,this.uploadLoading=!1,this.getData(1,10)},onErrorUpload:function(t,e,a){this.uploadDisabled=!1,this.uploadLoading=!1,t=JSON.parse(t.message),this.$message.error(t.message)},beforeUpload:function(t){this.uploadDisabled=!0,this.uploadLoading=!0},getTemplate:function(){window.open("/admin/student/template","_parent")}}},o=s,c=(a("9515"),a("2877")),r=Object(c["a"])(o,i,l,!1,null,"00f891cc",null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-27001631.fce8cf3a.js.map